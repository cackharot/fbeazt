<nav aria-label="You are here:" role="navigation">
  <ul class="breadcrumbs">
    <li><a (click)="goBack('Home')">Home</a></li>
    <li>
      <span class="show-for-sr">Current:</span>Checkout
    </li>
  </ul>
</nav>
<div class="callout primary" *ngIf="isEmpty()">
  <h3>Oops!</h3>
  <p>Added items to the cart to checkout :)</p>
</div>
<div class="callout alert" *ngIf="error != null">
  <h3>Oops!</h3>
  <p>This was not supposed to happen. Kindly try again after sometime.</p>
</div>
<section class="row" *ngIf="orderSuccess">
  <div class="medium-12 columns">
    <div class="callout success">
      <h3>Thanks {{order.delivery_details.name}},</h3>
      <p>
        Your order is successfull, kindly note the order number for further reference <b>{{order.order_no}}</b>.
        An invoice email is on the way to your inbox.
      </p>
      <p>
        Enjoy your gourment meal!
      </p>
      <p>
        <a (click)="trackOrder()">Click here</a> to track this order status.
      </p>
    </div>
  </div>
  <div class="medium12 columns">
    <h4>Feedback</h4>
    <p>
      Your feedback is valuable to us. We always like to serve you better. If you have any suggestions
      or compliants kindly write to us on <a href="mailto:foodbeazt@gmail.com">foodbeazt@gmail.com</a> or call us at 737300000.
    </p>
  </div>
  <div class="medium-12 columns">
    <h4>Frequently Asked Questions</h4>
    <ul>
      <li class="question">Do you operate outside Puducherry?</li>
      <li class="answer">NO. But we like to expand our services beyond Puducherry.
        Kindly contact us for more information.
      </li>
      <li class="question">Is Foodbeazt a restaurant which makes food and does online delivery?</li>
      <li class="answer">NO, Foodbeazt is a delivery service. We have tie up's with various
        restaurants in Puducherry. You can view menus of individual restaurants and order
        multiple food items from multiple restaurants.
      </li>
      <li class="question">Can I cancel the order?</li>
      <li class="answer">Yes you can cancel within 5 minutes of placing the order.</li>
      <li class="question">What is the delivery time?</li>
      <li class="answer">We have a specialized delivery team who make sure to
        get your food as soon as possible. We also requested the restaurants to make this in priority.
        Also it depends on distance between you and the restaurants, weather, traffic conditions,
        restaurants peak time, food availablity, etc., We will make sure to contact you if your order
        is getting delayed. So for now considering these factors the average delivery time would be 45 minutes.
      </li>
      <li class="question">What are the payment modes?</li>
      <li class="answer">At present we accept only Cash on Delivery.</li>
      <li class="question">What is your operation time?</li>
      <li class="answer">We operate from 9AM to 11PM for 365 days (Unless we have a natural calamity).
        However food availablity is upto the individual restaurant's holiday schedule.
      </li>
      <li class="question">One or many of the food items delivered has gone bad. What should I do?</li>
      <li class="answer">
        We are committed to deliver your items from restaurants without any delay and ensure that they
        are hot and fresh, so this does not happen. But in exceptional cases we will refund cash.
      </li>
    </ul>
  </div>
</section>
<form (ngSubmit)="confirmOrder()" #orderForm="ngForm" *ngIf="!orderSuccess">
<section class="row" *ngIf="!isEmpty()">
  <div class="medium-12 columns">
    <h2>Delivery Details</h2>
    <div class="callout secondary">
      <p>
        Kindly ensure that you have given correct delivery address with postbox number, floor number,
        mobile number and pincode.
        Unless you receive an email or SMS or a phone call from us, <i>Your order will not be processed.</i>
      </p>
    </div>
    <label for="name">Name:
      <input type="text" maxlength="50" id="name" [(ngModel)]="order.delivery_details.name" required/>
    </label>
    <label for="phone">Phone:
      <input type="text" maxlength="10" minlength="10" id="phone" [(ngModel)]="order.delivery_details.phone" required/>
    </label>
    <label for="email">Email:
      <input type="email" maxlength="200" minlength="3" id="email" [(ngModel)]="order.delivery_details.email" required/>
    </label>
    <label for="pincode">Pincode:
      <input type="text" maxlength="6" minlength="6" id="pincode" [(ngModel)]="order.delivery_details.pincode" required/>
    </label>
    <label for="address">Address:
      <textarea maxlength="500" minlength="10" id="address" [(ngModel)]="order.delivery_details.address" required></textarea>
    </label>
    <label for="landmark">Nearby landmark:
      <input type="text" maxlength="50" id="landmark" [(ngModel)]="order.delivery_details.landmark" />
    </label>
  </div>
  <div class="medium-12 columns">
    <h2>Payment Details</h2>
    <div class="callout primary">
      <p>Presently we accept only <b>Cash On Delivery</b>(CoD).</p>
      <p>Online transactions through Credit/Debit card and NetBanking coming soon...</p>
    </div>
  </div>
  <div class="medium-12 columns">
    <h2>Review Order</h2>
    <div class="review_restaurant" *ngFor="let store of order.getStores()">
      <h4>{{store.name}}</h4>
      <table class="table order_table">
        <tbody>
          <tr *ngFor="let item of order.getItems(store._id)">
            <td>
              <p class="product_name">{{item.name}}</p>
              <p class="product_desc">{{item.description}}</p>
            </td>
            <td class="quantity">
              {{item.price}}x{{item.quantity}}
            </td>
            <td class="price">
              {{item.getTotalPrice()}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="order__total__container">
      <table class="table order_table">
        <tfoot>
          <tr>
            <td colspan="2">
              Total:
            </td>
            <td class="total">
              Rs. {{order.getTotalAmount()}}
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
    <div class="center">
      <button (click)="resetOrder()" class="button secondary">Cancel</button>
      <button type="submit" class="button primary" [disabled]="!orderForm.form.valid">
        Confirm
      </button>
    </div>
  </div>
</section>
</form>